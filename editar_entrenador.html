<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Editar ejercicios</title>
        <!-- Archivos CSS -->
        <link rel="stylesheet" href="estilos_generales.css">
        <link rel="stylesheet" href="estilos_editar_entrenador.css">
    
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
        <script> $(document).ready(function () {
                // Cargar el header y footer desde header.html y footer.html
                $('header').load('header.html');
                $('footer').load('footer.html');
        });
                
        </script>
            
            <script>
            $(document).ready(function () {
                // Cargar el JSON y manejar las selecciones
                $.getJSON('pagina.json', function(data) {
                    const musculos = data.usuarios[0].editarEntrenador.musculo.opciones;

                    // Evento de cambio en los radios de músculo
                    $('input[name="musculo"]').change(function() {
                        const musculoSeleccionado = $(this).val();
                        console.log("Músculo seleccionado:", musculoSeleccionado); // Añadir esta línea para depurar
                        const ejercicios = data.usuarios[0].editarEntrenador.musculo.ejercicios[musculoSeleccionado];

                        // Limpiar ejercicios previos
                        $('.exercise-container').empty();

                        if (ejercicios) {
                            // Mostrar ejercicios
                            ejercicios.forEach(function(ejercicio) {
                                $('.exercise-container').append(`
                                    <div class="ejercicio-item">
                                        <input type="radio" id="${ejercicio.nombre}" name="ejercicio" value="${ejercicio.nombre}" />
                                        <label for="${ejercicio.nombre}" class="custom-radio">${ejercicio.nombre}</label><br>
                                    </div>
                                `);
                            });
                        }
                    });
                }).fail(function() {
                    console.error("No se pudo cargar el archivo JSON.");
                });
            });

            </script>

        <script>
    // El código JavaScript que sigue a continuación está comentado
    /*
    $(document).ready(function () {
        // Cargar el header y footer desde header.html y footer.html
        $('header').load('header.html');
        $('footer').load('footer.html');

        // Recuperar los días de entreno almacenados en localStorage
        const diasEntreno = localStorage.getItem('diasEntreno');
        
        if (diasEntreno) {
            const diasSeleccionados = JSON.parse(diasEntreno);
            const diasElements = document.getElementsByClassName('dia');

            // Ocultar todos los días primero
            for (let i = 0; i < diasElements.length; i++) {
                diasElements[i].style.display = "none";
            }

            // Mostrar los días seleccionados
            for (let i = 0; i < diasSeleccionados.length; i++) {
                for (let j = 0; j < diasElements.length; j++) {
                    if (diasElements[j].textContent === determinarDia(diasSeleccionados[i])) {
                        diasElements[j].style.display = "flex";
                    }
                }
            }
        } else {
            const diasElements = document.getElementsByClassName('dia');
            for (let i = 0; i < diasElements.length; i++) {
                diasElements[i].textContent = "No disponible";
            }
        }

        // Función para cambiar la abreviatura a nombre completo
        function determinarDia(diasEntreno) {
            switch (diasEntreno) {
                case "Lun": return "Lunes";
                case "Mar": return "Martes";
                case "Mié": return "Miércoles";
                case "Jue": return "Jueves";
                case "Vie": return "Viernes";
                case "Sáb": return "Sábado";
                case "Dom": return "Domingo";
                default: return "Día no disponible";
            }
        }

        // Manejar el click en los radios de ejercicios
        $('input[name="agregar"]').on('click', function () {
            const nombreEjercicio = $(this).next('label').text();
            agregarEjercicio(nombreEjercicio);
        });

        // Función para agregar nuevo cuadro de ejercicio
        function agregarEjercicio(nombreEjercicio) {
            const contenedorEjercicios = $('.exercise-container');
            const nuevoEjercicio = `
                <div class="crear">
                    <div class="frame">
                        <b class="ejercicio-nombre">${nombreEjercicio}</b>
                        <div class="reps">
                            <b class="ejercicio-reps">
                                <input type="text" placeholder="3-12" class="input-reps" />
                                reps
                            </b>
                            <button class="button borrar-ejercicio">Borrar</button>
                        </div>
                    </div>
                </div>
            `;
            contenedorEjercicios.append(nuevoEjercicio);
        }

        // Manejar el borrado de ejercicios
        $(document).on('click', '.borrar-ejercicio', function () {
            $(this).closest('.crear').remove();
        });

        // Manejar la selección de tiempo y músculo
        const radiosTiempo = $('input[name="tiempo-rutina"]');
        const radiosMusculo = $('input[name="musculo"]');
        const summaryTiempo = $('#tiempoSeleccionado');
        const summaryMusculo = $('#musculoSeleccionado');

        function actualizarTiempo() {
            const tiempoSeleccionado = radiosTiempo.filter(':checked').next('label').text();
            summaryTiempo.text(tiempoSeleccionado || 'Tiempo de la Rutina');
            summaryTiempo.css('color', tiempoSeleccionado ? 'black' : '');
        }

        function actualizarMusculo() {
            const musculoSeleccionado = radiosMusculo.filter(':checked').next('label').text();
            summaryMusculo.text(musculoSeleccionado || 'Músculo');
            summaryMusculo.css('color', musculoSeleccionado ? 'black' : '');
        }

        radiosTiempo.on('change', actualizarTiempo);
        radiosMusculo.on('change', actualizarMusculo);

        actualizarTiempo(); // Inicializar los summaries
        actualizarMusculo();
    });
    */
    </script>


    </head>
<body>
    <header></header>

    <div class="editar-ejercicios">
        <a href="Cliente-Entrenado.html">
            <img class="logos-icon" alt="Logos" src="img/Logos_flecha.svg">
          </a>
            <div class="meet-section">
                <h1>Editar Ejercicios</h1>
                <h2>Escoge el día, el tipo de músculo y agrega los ejercicios con las repeticiones correspondientes para cada cliente</h2>
    
                <div class="dias-container">
                    <h2 class="dia">Lunes</h2>
                    <h2 class="dia">Martes</h2>
                    <h2 class="dia">Miércoles</h2>
                    <h2 class="dia">Jueves</h2>
                    <h2 class="dia">Viernes</h2>
                    <h2 class="dia">Sabado</h2>
                    <h2 class="dia">Domingo</h2>

                </div>
            </div>
            <div class="opciones">
                <!-- Opciones para el Tiempo de la Rutina -->
                <div class="radio-options">
                    <details class="custom-dropdown">
                        <summary class="dropdown-header d-header"id="tiempoSeleccionado">Tiempo de la Rutina</summary>
                        <input type="radio" id="30min" name="tiempo-rutina" value="30min" />
                        <label for="30min" class="custom-radio">30 minutos</label><br>
            
                        <input type="radio" id="45min" name="tiempo-rutina" value="45min" />
                        <label for="45min" class="custom-radio">45 minutos</label><br>
            
                        <input type="radio" id="60min" name="tiempo-rutina" value="60min" />
                        <label for="60min" class="custom-radio">60 minutos</label><br>
            
                        <input type="radio" id="90min" name="tiempo-rutina" value="90min" />
                        <label for="90min" class="custom-radio">90 minutos</label>
                    </details>
                </div>
            
                <!-- Opciones para el Músculo -->
                
                <div class="radio-options">
                    <details class="custom-dropdown">
                        <summary class="dropdown-header d-header" id="musculoSeleccionado">Músculo</summary>
                        <input type="radio" id="pecho" name="musculo" value="Pecho" />
                        <label for="pecho" class="custom-radio">Pecho</label><br>
                
                        <input type="radio" id="espalda" name="musculo" value="Espalda" />
                        <label for="espalda" class="custom-radio">Espalda</label><br>
                
                        <input type="radio" id="piernas" name="musculo" value="Piernas" />
                        <label for="piernas" class="custom-radio">Piernas</label><br>
                
                        <input type="radio" id="hombros" name="musculo" value="Hombros" />
                        <label for="hombros" class="custom-radio">Hombros</label><br>
                
                        <input type="radio" id="brazos" name="musculo" value="Brazos" />
                        <label for="brazos" class="custom-radio">Brazos</label><br>
                
                        <input type="radio" id="abdominales" name="musculo" value="Abdomen" />
                        <label for="abdominales" class="custom-radio">Abdominales</label>
                    </details>
                </div>
                
        
                <div class="exercise-container">
                    <!-- Opciones para agregar ejercicio -->
                    <div class="radio-options">
                        <details class="custom-dropdown">
                            <summary class="d-mas">+</summary>
                           
                           <!-- <input type="radio" id="sentadilla-libre" name="agregar" value="sentadilla-libre" />
                            <label for="sentadilla-libre" class="custom-radio">Sentadilla Libre</label><br>
                
                            <input type="radio" id="prensa" name="agregar" value="prensa" />
                            <label for="prensa" class="custom-radio">Prensa</label><br>
                
                            <input type="radio" id="extensiones-cuadricep" name="agregar" value="extensiones-cuadricep" />
                            <label for="extensiones-cuadricep" class="custom-radio">Extensiones De Cuadricep</label><br>
                
                            <input type="radio" id="sentadilla-hack" name="agregar" value="sentadilla-hack" />
                            <label for="sentadilla-hack" class="custom-radio">Sentadilla Hack</label><br>
                
                            <input type="radio" id="sentadilla-smith" name="agregar" value="sentadilla-smith" />
                            <label for="sentadilla-smith" class="custom-radio">Sentadilla Smith</label>-->
                        </details>
                    </div>
                
                     <!-- Aquí se agregarán los ejercicios dinámicamente -->
                      <div class="crear-ejercicio"></div>

                    <!-- Crear Ejercicio -->
                    <div id="crearEjercicioModal" class="crear">
                        <div class="frame">
                            <b id="ejercicio-nombre">Sentadilla Libre</b>
                            <div class="reps">
                                <b id="ejercicio-reps">
                                    <input type="text" id="ejercicio-reps-numero" placeholder="3-12" class="input-reps" />
                                    reps
                                </b>
                                <button class="button">Borrar</button>
                            </div>
                        </div>
                    </div>
                    <div id="crearEjercicioModal" class="crear">
                        <div class="frame2">
                            <b id="ejercicio-nombre">Press Banca</b>
                            <div class="reps">
                                <b id="ejercicio-reps">
                                    <input type="text" id="ejercicio-reps-numero" placeholder="3-12" class="input-reps" />
                                    reps
                                </b>
                                <button class="button">Borrar</button>
                            </div>
                        </div>
                    </div>
                </div>
            
            </div>
            <button class="button button-centrado">
                Guardar
            </button>
    </div>

    <!-- Modal Borrar Ejercicio -->
    <div id="borrarModal" class="modal">
        <div class="modal-content">
            ¿Desea Borrar?
            <div class="boton-parent">
                <button class="button">Si</button>
                <button class="button">No</button>
            </div>
        </div>
    </div>

    <!-- Modal Ejercicio Borrado -->
    <div id="ejercicioBorradoModal" class="modal">
        <div class="modal-content">
            Se ha borrado el ejercicio
        <button id="cerrarBorrarButton"class="button">Cerrar</button>
    </div>
</div>

<!-- Modal Guardado -->
<div id="guardarModal" class="modal">
    <div class="modal-content">
        Se ha guardado la rutina
        <a href="Cliente-Entrenado.html">
        <button class="button">Cerrar</button>
        </a>
    </div>
</div>
    <footer></footer>

    <!-- JavaScript -->
    <script>
    $(document).ready(function () {
    // Cargar el header y footer
    $('header').load('header.html');
    $('footer').load('footer.html');

    // Realizar una solicitud AJAX para cargar los datos de "pagina.json"
    $.getJSON('pagina.json', function (data) {
        // Supongamos que el primer usuario es el que queremos mostrar (o puedes añadir lógica para buscar por ID)
        const usuario = data.usuarios.find(u => u.tipoUsuario === 'entrenador'); // Cambia según el tipo de usuario

        if (usuario && usuario.editarEntrenador && usuario.editarEntrenador.diasEntreno) {
            const diasSeleccionados = usuario.editarEntrenador.diasEntreno.seleccionDias;

            // Obtenemos los elementos con la clase "dia"
            const diasElements = document.getElementsByClassName('dia');

            // Ocultar todos los días primero
            for (let i = 0; i < diasElements.length; i++) {
                diasElements[i].style.display = "none";
            }

            // Iteramos sobre los días seleccionados y los mostramos
            for (let i = 0; i < diasSeleccionados.length; i++) {
                for (let j = 0; j < diasElements.length; j++) {
                    // Convertimos la abreviatura al nombre completo usando determinarDia
                    if (diasElements[j].textContent === determinarDia(diasSeleccionados[i])) {
                        diasElements[j].style.display = "flex"; // Mostramos los días seleccionados
                    }
                }
            }
        } else {
            // Si no hay días almacenados, mostramos "No disponible"
            const diasElements = document.getElementsByClassName('dia');
            for (let i = 0; i < diasElements.length; i++) {
                diasElements[i].textContent = "No disponible";
            }
        }
    }).fail(function () {
        console.error("No se pudo cargar el archivo JSON.");
    });

    // Función para cambiar la abreviatura a nombre completo
    function determinarDia(diasEntreno) 
    {
        switch (diasEntreno) {
            case "Lun":
                return "Lunes";
            case "Mar":
                return "Martes";
            case "Mié":
                return "Miércoles";
            case "Jue":
                return "Jueves";
            case "Vie":
                return "Viernes";
            case "Sáb":
                return "Sábado";
            case "Dom":
                return "Domingo";
            default:
                return "Día no disponible";
        }
    }
            // Configuración para el manejo de tiempos de rutina y músculos
            const radiosTiempo = document.querySelectorAll('input[name="tiempo-rutina"]');
            const summaryTiempo = document.getElementById('tiempoSeleccionado');
    
            const radiosMusculo = document.querySelectorAll('input[name="musculo"]');
            const summaryMusculo = document.getElementById('musculoSeleccionado');
    
            const modal = document.getElementById('crearEjercicioModal');
            const ejercicioNombre = document.getElementById('ejercicio-nombre');
            const radioButtons = document.querySelectorAll('input[name="agregar"]');
    
            const borrarModal = document.getElementById('borrarModal');
            const siButton = borrarModal.querySelector('.boton-parent .button:first-child');
            const noButton = borrarModal.querySelector('.boton-parent .button:last-child');
            const borrarButtons = document.querySelectorAll('.frame .button');
    
            const guardarModal = document.getElementById('guardarModal');
            const guardarButton = document.querySelector('.button-centrado');
    
            const borrar = document.getElementById('ejercicioBorradoModal');
            const cerrarBorrarButton = document.getElementById('cerrarBorrarButton');
    
            // Mostrar el modal de confirmación de borrado al hacer clic en borrar
            borrarButtons.forEach(boton => {
                boton.addEventListener('click', function () {
                    borrarModal.style.display = 'flex'; // Mostrar el modal
                });
            });
    
            // Al hacer clic en "Sí", ocultar el modal
            siButton.addEventListener('click', function () {
                borrarModal.style.display = 'none'; // Ocultar el modal de confirmación
                modal.style.display = 'none'; // Ocultar también el modal de creación de ejercicios (si es necesario)
    
                borrar.style.display = 'flex'; // Mostrar el modal de ejercicio borrado
            });
    
            // Al hacer clic en "No", simplemente ocultar el modal de confirmación
            noButton.addEventListener('click', function () {
                borrarModal.style.display = 'none'; // Ocultar el modal de confirmación
            });
    
            // Cerrar el modal de ejercicio borrado al hacer clic en "Cerrar"
            cerrarBorrarButton.addEventListener('click', function () {
                borrar.style.display = 'none'; // Ocultar el modal de ejercicio borrado
            });
    
            // Función para actualizar el texto del summary de tiempo de la rutina
            function actualizarTiempo() {
                const tiempoSeleccionado = Array.from(radiosTiempo)
                    .filter(radio => radio.checked)
                    .map(radio => radio.labels[0].innerText);
    
                if (tiempoSeleccionado.length > 0) {
                    summaryTiempo.textContent = tiempoSeleccionado[0]; 
                    summaryTiempo.style.color = 'black';
                } else {
                    summaryTiempo.textContent = 'Tiempo de la Rutina';
                    summaryTiempo.style.color = '';
                }
            }
    
            // Función para actualizar el texto del summary de músculo
            function actualizarMusculo() {
                const musculoSeleccionado = Array.from(radiosMusculo)
                    .filter(radio => radio.checked)
                    .map(radio => radio.labels[0].innerText);
    
                if (musculoSeleccionado.length > 0) {
                    summaryMusculo.textContent = musculoSeleccionado[0];
                    summaryMusculo.style.color = 'black';
                } else {
                    summaryMusculo.textContent = 'Músculo';
                    summaryMusculo.style.color = '';
                }
            }
    
            // Actualizar el contenido del modal de ejercicios cuando se selecciona un ejercicio
            radioButtons.forEach(radio => {
                radio.addEventListener('click', function () {
                    const label = document.querySelector(`label[for="${radio.id}"]`).innerText;
                    ejercicioNombre.textContent = label;
                    modal.style.display = 'flex'; 
                    modal.style.zIndex = '1000'; 
                });
            });
    
            radiosTiempo.forEach(radio => {
                radio.addEventListener('change', actualizarTiempo);
            });
    
            radiosMusculo.forEach(radio => {
                radio.addEventListener('change', actualizarMusculo);
            });
    
            actualizarTiempo();
            actualizarMusculo();
    
            guardarButton.addEventListener('click', function () {
                guardarModal.style.display = 'flex'; 
            });
    
            const cerrarGuardarButton = guardarModal.querySelector('button');
            cerrarGuardarButton.addEventListener('click', function () {
                guardarModal.style.display = 'none'; 
            });

            // Escuchador para el botón de agregar cuadros
            document.getElementById('addButton').addEventListener('click', function() {
            // Crear un nuevo cuadro de contenido
            var newDiv = document.createElement('div');
            newDiv.className = 'exercise-box';
    
            // Opcional: Puedes agregar contenido adicional o estilos a este div
            newDiv.innerHTML = 'Este es un nuevo cuadro de ejercicio';
    
            // Agregar el nuevo cuadro al contenedor
            document.getElementById('exerciseContainer').appendChild(newDiv);
});

        });
    </script>    

    
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const musculoOptions = document.querySelectorAll('input[name="musculo"]');
        const ejercicioContainer = document.querySelector('.exercise-container .radio-options');
    
        // Cargar el JSON desde el archivo externo
        fetch('pagina.json')
            .then(response => response.json())
            .then(data => {
                musculoOptions.forEach(option => {
                    option.addEventListener('change', function () {
                        const seleccionado = this.value;
                        actualizarEjercicios(seleccionado);
                    });
                });
    
                function actualizarEjercicios(musculo) {
                    // Limpiar ejercicios anteriores
                    ejercicioContainer.innerHTML = '';
    
                    // Obtener ejercicios para el músculo seleccionado
                    const ejercicios = data.usuarios[1].editarEntrenador.musculo.ejercicios[musculo];
    
                    if (ejercicios) {
                        ejercicios.forEach(ejercicio => {
                            const radio = document.createElement('input');
                            radio.type = 'radio';
                            radio.id = ejercicio.nombre.replace(/\s+/g, '-').toLowerCase();
                            radio.name = 'agregar';
                            radio.value = ejercicio.nombre;
    
                            const label = document.createElement('label');
                            label.htmlFor = radio.id;
                            label.className = 'custom-radio';
                            label.textContent = ejercicio.nombre;
    
                            ejercicioContainer.appendChild(radio);
                            ejercicioContainer.appendChild(label);
                            ejercicioContainer.appendChild(document.createElement('br'));
                        });
                    } else {
                        // Mensaje si no hay ejercicios disponibles
                        const noEjercicios = document.createElement('p');
                        noEjercicios.textContent = 'No hay ejercicios disponibles para este músculo.';
                        ejercicioContainer.appendChild(noEjercicios);
                    }
                }
            })
            .catch(error => console.error('Error al cargar el JSON:', error));
    });
    </script>
    
</body>
</html>
